!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Webclient=t()}}(function(){var t;return function e(t,n,r){function o(c,s){if(!n[c]){if(!t[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var a=n[c]={exports:{}};t[c][0].call(a.exports,function(e){var n=t[c][1][e];return o(n?n:e)},a,a.exports,e,t,n,r)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(t,e,n){e.exports={Client:window.WebSocket}},{}],2:[function(t,e,n){function r(t){return this instanceof r?(this._console=this._getConsole(t||{}),this._settings=this._configure(t||{}),this._backoffDelay=this._settings.backoffDelayMin,this._pendingRequests={},this._webSocket=null,o.createEventEmitter(this),this._delegateEvents(),void(this._settings.autoConnect&&this.connect())):new r(t)}var o=t("bane"),i=t("../lib/websocket/"),c=t("when");r.ConnectionError=function(t){this.name="ConnectionError",this.message=t},r.ConnectionError.prototype=Object.create(Error.prototype),r.ConnectionError.prototype.constructor=r.ConnectionError,r.ServerError=function(t){this.name="ServerError",this.message=t},r.ServerError.prototype=Object.create(Error.prototype),r.ServerError.prototype.constructor=r.ServerError,r.WebSocket=i.Client,r.when=c,r.prototype._getConsole=function(t){if("undefined"!=typeof t.console)return t.console;var e="undefined"!=typeof console&&console||{};return e.log=e.log||function(){},e.warn=e.warn||function(){},e.error=e.error||function(){},e},r.prototype._configure=function(t){var e="undefined"!=typeof document&&"https:"===document.location.protocol?"wss://":"ws://",n="undefined"!=typeof document&&document.location.host||"localhost";return t.webSocketUrl=t.webSocketUrl||e+n+"/musicbox_webclient/ws",t.autoConnect!==!1&&(t.autoConnect=!0),t.backoffDelayMin=t.backoffDelayMin||1e3,t.backoffDelayMax=t.backoffDelayMax||64e3,"undefined"==typeof t.callingConvention&&this._console.warn("Webclient.js is using the default calling convention. The default will change in the future. You should explicitly specify which calling convention you use."),t.callingConvention=t.callingConvention||"by-position-only",t},r.prototype._delegateEvents=function(){this.off("websocket:close"),this.off("websocket:error"),this.off("websocket:incomingMessage"),this.off("websocket:open"),this.off("state:offline"),this.on("websocket:close",this._cleanup),this.on("websocket:error",this._handleWebSocketError),this.on("websocket:incomingMessage",this._handleMessage),this.on("websocket:open",this._resetBackoffDelay),this.on("websocket:open",this._getApiSpec),this.on("state:offline",this._reconnect)},r.prototype.connect=function(){if(this._webSocket){if(this._webSocket.readyState===r.WebSocket.OPEN)return;this._webSocket.close()}this._webSocket=this._settings.webSocket||new r.WebSocket(this._settings.webSocketUrl),this._webSocket.onclose=function(t){this.emit("websocket:close",t)}.bind(this),this._webSocket.onerror=function(t){this.emit("websocket:error",t)}.bind(this),this._webSocket.onopen=function(){this.emit("websocket:open")}.bind(this),this._webSocket.onmessage=function(t){this.emit("websocket:incomingMessage",t)}.bind(this)},r.prototype._cleanup=function(t){Object.keys(this._pendingRequests).forEach(function(e){var n=this._pendingRequests[e];delete this._pendingRequests[e];var o=new r.ConnectionError("WebSocket closed");o.closeEvent=t,n.reject(o)}.bind(this)),this.emit("state:offline")},r.prototype._reconnect=function(){this.emit("reconnectionPending",{timeToAttempt:this._backoffDelay}),setTimeout(function(){this.emit("reconnecting"),this.connect()}.bind(this),this._backoffDelay),this._backoffDelay=2*this._backoffDelay,this._backoffDelay>this._settings.backoffDelayMax&&(this._backoffDelay=this._settings.backoffDelayMax)},r.prototype._resetBackoffDelay=function(){this._backoffDelay=this._settings.backoffDelayMin},r.prototype.close=function(){this.off("state:offline",this._reconnect),this._webSocket.close()},r.prototype._handleWebSocketError=function(t){this._console.warn("WebSocket error:",t.stack||t)},r.prototype._send=function(t){switch(this._webSocket.readyState){case r.WebSocket.CONNECTING:return c.reject(new r.ConnectionError("WebSocket is still connecting"));case r.WebSocket.CLOSING:return c.reject(new r.ConnectionError("WebSocket is closing"));case r.WebSocket.CLOSED:return c.reject(new r.ConnectionError("WebSocket is closed"));default:var e=c.defer();return t.jsonrpc="2.0",t.id=this._nextRequestId(),this._pendingRequests[t.id]=e.resolver,this._webSocket.send(JSON.stringify(t)),this.emit("websocket:outgoingMessage",t),e.promise}},r.prototype._nextRequestId=function(){var t=-1;return function(){return t+=1}}(),r.prototype._handleMessage=function(t){try{var e=JSON.parse(t.data);e.hasOwnProperty("id")?this._handleResponse(e):e.hasOwnProperty("event")?this._handleEvent(e):this._console.warn("Unknown message type received. Message was: "+t.data)}catch(n){if(!(n instanceof SyntaxError))throw n;this._console.warn("WebSocket message parsing failed. Message was: "+t.data)}},r.prototype._handleResponse=function(t){if(!this._pendingRequests.hasOwnProperty(t.id))return void this._console.warn("Unexpected response received. Message was:",t);var e,n=this._pendingRequests[t.id];delete this._pendingRequests[t.id],t.hasOwnProperty("result")?n.resolve(t.result):t.hasOwnProperty("error")?(e=new r.ServerError(t.error.message),e.code=t.error.code,e.data=t.error.data,n.reject(e),this._console.warn("Server returned error:",t.error)):(e=new Error('Response without "result" or "error" received'),e.data={response:t},n.reject(e),this._console.warn('Response without "result" or "error" received. Message was:',t))},r.prototype._handleEvent=function(t){var e=t.event,n=t;delete n.event,this.emit("event:"+this._snakeToCamel(e),n)},r.prototype._getApiSpec=function(){return this._send({method:"webclient.describe"}).then(this._createApi.bind(this))["catch"](this._handleWebSocketError)},r.prototype._createApi=function(t){var e="by-position-or-by-name"===this._settings.callingConvention,n=function(t){return function(){var n={method:t};return 0===arguments.length?this._send(n):e?arguments.length>1?c.reject(new Error("Expected zero arguments, a single array, or a single object.")):Array.isArray(arguments[0])||arguments[0]===Object(arguments[0])?(n.params=arguments[0],this._send(n)):c.reject(new TypeError("Expected an array or an object.")):(n.params=Array.prototype.slice.call(arguments),this._send(n))}.bind(this)}.bind(this),r=function(t){var e=t.split(".");return e.length>=1&&"webclient"===e[0]&&(e=e.slice(1)),e},o=function(t){var e=this;return t.forEach(function(t){t=this._snakeToCamel(t),e[t]=e[t]||{},e=e[t]}.bind(this)),e}.bind(this),i=function(e){var i=r(e),c=this._snakeToCamel(i.slice(-1)[0]),s=o(i.slice(0,-1));s[c]=n(e),s[c].description=t[e].description,s[c].params=t[e].params}.bind(this);Object.keys(t).forEach(i),this.emit("state:online")},r.prototype._snakeToCamel=function(t){return t.replace(/(_[a-z])/g,function(t){return t.toUpperCase().replace("_","")})},e.exports=r},{"../lib/websocket/":1,bane:3,when:22}],3:[function(e,n,r){("function"==typeof t&&t.amd&&function(e){t("bane",e)}||"object"==typeof n&&function(t){n.exports=t()}||function(t){this.bane=t()})(function(){"use strict";function t(t,e,n){var r,o=n.length;if(o>0)for(r=0;o>r;++r)n[r](t,e);else setTimeout(function(){throw e.message=t+" listener threw error: "+e.message,e},0)}function e(t){if("function"!=typeof t)throw new TypeError("Listener is not function");return t}function n(t){return t.supervisors||(t.supervisors=[]),t.supervisors}function r(t,e){return t.listeners||(t.listeners={}),e&&!t.listeners[e]&&(t.listeners[e]=[]),e?t.listeners[e]:t.listeners}function o(t){return t.errbacks||(t.errbacks=[]),t.errbacks}function i(i){function s(e,n,r){try{n.listener.apply(n.thisp||i,r)}catch(c){t(e,c,o(i))}}return i=i||{},i.on=function(t,o,i){return"function"==typeof t?n(this).push({listener:t,thisp:o}):void r(this,t).push({listener:e(o),thisp:i})},i.off=function(t,e){var i,c,s,u;if(!t){i=n(this),i.splice(0,i.length),c=r(this);for(s in c)c.hasOwnProperty(s)&&(i=r(this,s),i.splice(0,i.length));return i=o(this),void i.splice(0,i.length)}if("function"==typeof t?(i=n(this),e=t):i=r(this,t),!e)return void i.splice(0,i.length);for(s=0,u=i.length;u>s;++s)if(i[s].listener===e)return void i.splice(s,1)},i.once=function(t,e,n){var r=function(){i.off(t,r),e.apply(this,arguments)};i.on(t,r,n)},i.bind=function(t,e){var n,r,o;if(e)for(r=0,o=e.length;o>r;++r){if("function"!=typeof t[e[r]])throw new Error("No such method "+e[r]);this.on(e[r],t[e[r]],t)}else for(n in t)"function"==typeof t[n]&&this.on(n,t[n],t);return t},i.emit=function(t){var e,o,i=n(this),u=c.call(arguments);for(e=0,o=i.length;o>e;++e)s(t,i[e],u);for(i=r(this,t).slice(),u=c.call(arguments,1),e=0,o=i.length;o>e;++e)s(t,i[e],u)},i.errback=function(t){this.errbacks||(this.errbacks=[]),this.errbacks.push(e(t))},i}var c=Array.prototype.slice;return{createEventEmitter:i,aggregate:function(t){var e=i();return t.forEach(function(t){t.on(function(t,n){e.emit(t,n)})}),e}}})},{}],4:[function(t,e,n){function r(){a=!1,s.length?f=s.concat(f):h=-1,f.length&&o()}function o(){if(!a){var t=setTimeout(r);a=!0;for(var e=f.length;e;){for(s=f,f=[];++h<e;)s&&s[h].run();h=-1,e=f.length}s=null,a=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function c(){}var s,u=e.exports={},f=[],a=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new i(t,e)),1!==f.length||a||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],5:[function(e,n,r){!function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./Scheduler"),r=t("./env").asap;return e({scheduler:new n(r)})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./Scheduler":6,"./env":18,"./makePromise":20}],6:[function(e,n,r){!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],7:[function(e,n,r){!function(t){"use strict";t(function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],8:[function(e,n,r){!function(t){"use strict";t(function(){function t(t,n){function r(e,r,i){var c=t._defer(),s=i.length,u=new Array(s);return o({f:e,thisArg:r,args:i,params:u,i:s-1,call:n},c._handler),c}function o(e,r){if(e.i<0)return n(e.f,e.thisArg,e.params,r);var o=t._handler(e.args[e.i]);o.fold(i,e,void 0,r)}function i(t,e,n){t.params[t.i]=e,t.i-=1,o(t,n)}return arguments.length<2&&(n=e),r}function e(t,e,n,r){try{r.resolve(t.apply(e,n))}catch(o){r.reject(o)}}return t.tryCatchResolve=e,t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],9:[function(e,n,r){!function(t){"use strict";t(function(t){var e=t("../state"),n=t("../apply");return function(t){function r(e){function n(t){a=null,this.resolve(t)}function r(t){this.resolved||(a.push(t),0===--f&&this.reject(a))}for(var o,i,c=t._defer(),s=c._handler,u=e.length>>>0,f=u,a=[],h=0;u>h;++h)if(i=e[h],void 0!==i||h in e){if(o=t._handler(i),o.state()>0){s.become(o),t._visitRemaining(e,h,o);break}o.visit(s,n,r)}else--f;return 0===f&&s.reject(new RangeError("any(): array must not be empty")),c}function o(e,n){function r(t){this.resolved||(a.push(t),0===--p&&(h=null,this.resolve(a)))}function o(t){this.resolved||(h.push(t),0===--i&&(a=null,this.reject(h)))}var i,c,s,u=t._defer(),f=u._handler,a=[],h=[],l=e.length>>>0,p=0;for(s=0;l>s;++s)c=e[s],(void 0!==c||s in e)&&++p;for(n=Math.max(n,0),i=p-n+1,p=Math.min(n,p),n>p?f.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+p)):0===p&&f.resolve(a),s=0;l>s;++s)c=e[s],(void 0!==c||s in e)&&t._handler(c).visit(f,r,o,f.notify);return u}function i(e,n){return t._traverse(n,e)}function c(e,n){var r=_.call(e);return t._traverse(n,r).then(function(t){return s(r,t)})}function s(e,n){for(var r=n.length,o=new Array(r),i=0,c=0;r>i;++i)n[i]&&(o[c++]=t._handler(e[i]).value);return o.length=c,o}function u(t){return y(t.map(f))}function f(n){var r=t._handler(n);return 0===r.state()?d(n).then(e.fulfilled,e.rejected):(r._unreport(),e.inspect(r))}function a(t,e){return arguments.length>2?v.call(t,l(e),arguments[2]):v.call(t,l(e))}function h(t,e){return arguments.length>2?b.call(t,l(e),arguments[2]):b.call(t,l(e))}function l(t){return function(e,n,r){return p(t,void 0,[e,n,r])}}var p=n(t),d=t.resolve,y=t.all,v=Array.prototype.reduce,b=Array.prototype.reduceRight,_=Array.prototype.slice;return t.any=r,t.some=o,t.settle=u,t.map=i,t.filter=c,t.reduce=a,t.reduceRight=h,t.prototype.spread=function(t){return this.then(y).then(function(e){return t.apply(this,e)})},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../apply":8,"../state":21}],10:[function(e,n,r){!function(t){"use strict";t(function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return n(e)?t instanceof e:e(t)}function n(t){return t===Error||null!=t&&t.prototype instanceof Error}function r(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function o(t){return t}return function(n){function i(t,n){return function(r){return e(r,n)?t.call(this,r):f(r)}}function c(t,e,n,o){var i=t.call(e);return r(i)?s(i,n,o):n(o)}function s(t,e,n){return u(t).then(function(){return e(n)})}var u=n.resolve,f=n.reject,a=n.prototype["catch"];return n.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},n.prototype["catch"]=n.prototype.otherwise=function(e){return arguments.length<2?a.call(this,e):"function"!=typeof e?this.ensure(t):a.call(this,i(arguments[1],e))},n.prototype["finally"]=n.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(e){return c(t,this,o,e)},function(e){return c(t,this,f,e)})},n.prototype["else"]=n.prototype.orElse=function(t){return this.then(void 0,function(){return t})},n.prototype["yield"]=function(t){return this.then(function(){return t})},n.prototype.tap=function(t){return this.then(t)["yield"](this)},n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],11:[function(e,n,r){!function(t){"use strict";t(function(){return function(t){return t.prototype.fold=function(e,n){var r=this._beget();return this._handler.fold(function(n,r,o){t._handler(n).fold(function(t,n,r){r.resolve(e.call(this,n,t))},r,this,o)},n,r._handler.receiver,r._handler),r},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],12:[function(e,n,r){!function(t){"use strict";t(function(t){var e=t("../state").inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../state":21}],13:[function(e,n,r){!function(t){"use strict";t(function(){return function(t){function e(t,e,r,o){return n(function(e){return[e,t(e)]},e,r,o)}function n(t,e,o,i){function c(i,c){return r(o(i)).then(function(){return n(t,e,o,c)})}return r(i).then(function(n){return r(e(n)).then(function(e){return e?n:r(t(n)).spread(c)})})}var r=t.resolve;return t.iterate=e,t.unfold=n,t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],14:[function(e,n,r){!function(t){"use strict";t(function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],15:[function(e,n,r){!function(t){"use strict";t(function(t){function e(t,e,r,o){return n.setTimer(function(){t(r,o,e)},e)}var n=t("../env"),r=t("../TimeoutError");return function(t){function o(t,n,r){e(i,t,n,r)}function i(t,e){e.resolve(t)}function c(t,e,n){var o="undefined"==typeof t?new r("timed out after "+n+"ms"):t;e.reject(o)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(o,t,void 0,e._handler),e},t.prototype.timeout=function(t,r){var o=this._beget(),i=o._handler,s=e(c,t,r,o._handler);return this._handler.visit(i,function(t){n.clearTimer(s),this.resolve(t)},function(t){n.clearTimer(s),this.reject(t)},i.notify),o},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../TimeoutError":7,"../env":18}],16:[function(e,n,r){!function(t){"use strict";t(function(t){function e(t){throw t}function n(){}var r=t("../env").setTimer,o=t("../format");return function(t){function i(t){t.handled||(p.push(t),a("Potentially unhandled rejection ["+t.id+"] "+o.formatError(t.value)))}function c(t){var e=p.indexOf(t);e>=0&&(p.splice(e,1),h("Handled previous rejection ["+t.id+"] "+o.formatObject(t.value)))}function s(t,e){l.push(t,e),null===d&&(d=r(u,0))}function u(){for(d=null;l.length>0;)l.shift()(l.shift())}var f,a=n,h=n;"undefined"!=typeof console&&(f=console,a="undefined"!=typeof f.error?function(t){f.error(t)}:function(t){f.log(t)},h="undefined"!=typeof f.info?function(t){f.info(t)}:function(t){f.log(t)}),t.onPotentiallyUnhandledRejection=function(t){s(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){s(c,t)},t.onFatalRejection=function(t){s(e,t.value)};var l=[],p=[],d=null;return t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../env":18,"../format":19}],17:[function(e,n,r){!function(t){"use strict";t(function(){return function(t){return t.prototype["with"]=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],18:[function(e,n,r){(function(r){!function(t){"use strict";t(function(t){function e(){return"undefined"!=typeof r&&"[object process]"===Object.prototype.toString.call(r)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(t){function e(){var t=n;n=void 0,t()}var n,r=document.createTextNode(""),o=new t(e);o.observe(r,{characterData:!0});var i=0;return function(t){n=t,r.data=i^=1}}var i,c="undefined"!=typeof setTimeout&&setTimeout,s=function(t,e){return setTimeout(t,e)},u=function(t){return clearTimeout(t)},f=function(t){return c(t,0)};if(e())f=function(t){return r.nextTick(t)};else if(i=n())f=o(i);else if(!c){var a=t,h=a("vertx");s=function(t,e){return h.setTimer(e,t)},u=h.cancelTimer,f=h.runOnLoop||h.runOnContext}return{setTimer:s,clearTimer:u,asap:f}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})}).call(this,e("_process"))},{_process:4}],19:[function(e,n,r){!function(t){"use strict";t(function(){function t(t){var n="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=n(t,e)),e}function n(t,e){try{return JSON.stringify(t)}catch(n){return e}}return{formatError:t,formatObject:e,tryStringify:n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],20:[function(e,n,r){(function(e){!function(t){"use strict";t(function(){return function(t){function n(t,e){this._handler=t===w?e:r(t)}function r(t){function e(t){o.resolve(t)}function n(t){o.reject(t)}function r(t){o.notify(t)}var o=new j;try{t(e,n,r)}catch(i){n(i)}return o}function o(t){return P(t)?t:new n(w,new k(b(t)))}function i(t){return new n(w,new k(new S(t)))}function c(){return tt}function s(){return new n(w,new j)}function u(t,e){var n=new j(t.receiver,t.join().context);return new e(w,n)}function f(t){return h(J,null,t)}function a(t,e){return h(Q,t,e)}function h(t,e,r){function o(n,o,c){c.resolved||l(r,i,n,t(e,o,n),c)}function i(t,e,n){a[t]=e,0===--f&&n.become(new x(a))}for(var c,s="function"==typeof e?o:i,u=new j,f=r.length>>>0,a=new Array(f),h=0;h<r.length&&!u.resolved;++h)c=r[h],void 0!==c||h in r?l(r,s,h,c,u):--f;return 0===f&&u.become(new x(a)),new n(w,u)}function l(t,e,n,r,o){if(W(r)){var i=_(r),c=i.state();0===c?i.fold(e,n,void 0,o):c>0?e(n,i.value,o):(o.become(i),p(t,n+1,i))}else e(n,r,o)}function p(t,e,n){for(var r=e;r<t.length;++r)d(b(t[r]),n)}function d(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):0>n&&t._unreport()}}function y(t){return"object"!=typeof t||null===t?i(new TypeError("non-iterable passed to race()")):0===t.length?c():1===t.length?o(t[0]):v(t)}function v(t){var e,r,o,i=new j;for(e=0;e<t.length;++e)if(r=t[e],void 0!==r||e in t){if(o=b(r),0!==o.state()){i.become(o),p(t,e+1,o);break}o.visit(i,i.resolve,i.reject)}return new n(w,i)}function b(t){return P(t)?t._handler.join():W(t)?m(t):new x(t)}function _(t){return P(t)?t._handler.join():m(t)}function m(t){try{var e=t.then;return"function"==typeof e?new E(e,t):new x(t)}catch(n){return new S(n)}}function w(){}function g(){}function j(t,e){n.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function k(t){this.handler=t}function E(t,e){j.call(this),K.enqueue(new M(t,e,this))}function x(t){n.createContext(this),this.value=t}function S(t){n.createContext(this),this.id=++Z,this.value=t,this.handled=!1,this.reported=!1,this._report()}function C(t,e){this.rejection=t,this.context=e}function T(t){this.rejection=t}function R(){return new S(new TypeError("Promise cycle"))}function O(t,e){this.continuation=t,this.handler=e}function q(t,e){this.handler=e,this.value=t}function M(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function A(t,e,n,r,o){try{t.call(e,n,r,o)}catch(i){r(i)}}function D(t,e,n,r){this.f=t,this.z=e,this.c=n,this.to=r,this.resolver=X,this.receiver=this}function P(t){return t instanceof n}function W(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function L(t,e,r,o){return"function"!=typeof t?o.become(e):(n.enterContext(e),H(t,e.value,r,o),void n.exitContext())}function N(t,e,r,o,i){return"function"!=typeof t?i.become(r):(n.enterContext(r),I(t,e,r.value,o,i),void n.exitContext())}function U(t,e,r,o,i){return"function"!=typeof t?i.notify(e):(n.enterContext(r),z(t,e,o,i),void n.exitContext())}function Q(t,e,n){try{return t(e,n)}catch(r){return i(r)}}function H(t,e,n,r){try{r.become(b(t.call(n,e)))}catch(o){r.become(new S(o))}}function I(t,e,n,r,o){try{t.call(r,e,n,o)}catch(i){o.become(new S(i))}}function z(t,e,n,r){try{r.notify(t.call(n,e))}catch(o){r.notify(o)}}function F(t,e){e.prototype=V(t.prototype),e.prototype.constructor=e}function J(t,e){return e}function G(){}function B(){return"undefined"!=typeof e&&null!==e&&"function"==typeof e.emit?function(t,n){return"unhandledRejection"===t?e.emit(t,n.value,n):e.emit(t,n)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var r=!1;try{var o=new n("unhandledRejection");r=o instanceof n}catch(i){}return r?function(t,r){var o=new n(t,{detail:{reason:r.value,key:r},bubbles:!1,cancelable:!0});return!e.dispatchEvent(o)}:t}(G,self,CustomEvent):G}var K=t.scheduler,Y=B(),V=Object.create||function(t){function e(){}return e.prototype=t,new e};n.resolve=o,n.reject=i,n.never=c,n._defer=s,n._handler=b,n.prototype.then=function(t,e,n){var r=this._handler,o=r.join().state();if("function"!=typeof t&&o>0||"function"!=typeof e&&0>o)return new this.constructor(w,r);var i=this._beget(),c=i._handler;return r.chain(c,r.receiver,t,e,n),i},n.prototype["catch"]=function(t){return this.then(void 0,t)},n.prototype._beget=function(){return u(this._handler,this.constructor)},n.all=f,n.race=y,n._traverse=a,n._visitRemaining=p,w.prototype.when=w.prototype.become=w.prototype.notify=w.prototype.fail=w.prototype._unreport=w.prototype._report=G,w.prototype._state=0,w.prototype.state=function(){return this._state},w.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},w.prototype.chain=function(t,e,n,r,o){this.when({resolver:t,receiver:e,fulfilled:n,rejected:r,progress:o})},w.prototype.visit=function(t,e,n,r){this.chain(X,t,e,n,r)},w.prototype.fold=function(t,e,n,r){this.when(new D(t,e,n,r))},F(w,g),g.prototype.become=function(t){t.fail()};var X=new g;F(w,j),j.prototype._state=0,j.prototype.resolve=function(t){this.become(b(t))},j.prototype.reject=function(t){this.resolved||this.become(new S(t))},j.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=R();return t},j.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},j.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&K.enqueue(this),void 0!==this.context&&t._report(this.context))},j.prototype.when=function(t){this.resolved?K.enqueue(new O(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},j.prototype.notify=function(t){this.resolved||K.enqueue(new q(t,this))},j.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},j.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},j.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},F(w,k),k.prototype.when=function(t){K.enqueue(new O(t,this))},k.prototype._report=function(t){this.join()._report(t)},k.prototype._unreport=function(){this.join()._unreport()},F(j,E),F(w,x),x.prototype._state=1,x.prototype.fold=function(t,e,n,r){N(t,e,this,n,r)},x.prototype.when=function(t){L(t.fulfilled,this,t.receiver,t.resolver)};var Z=0;F(w,S),S.prototype._state=-1,S.prototype.fold=function(t,e,n,r){r.become(this)},S.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),L(t.rejected,this,t.receiver,t.resolver)},S.prototype._report=function(t){K.afterQueue(new C(this,t))},S.prototype._unreport=function(){this.handled||(this.handled=!0,K.afterQueue(new T(this)))},S.prototype.fail=function(t){this.reported=!0,Y("unhandledRejection",this),n.onFatalRejection(this,void 0===t?this.context:t)},C.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,Y("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},T.prototype.run=function(){this.rejection.reported&&(Y("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=G;var $=new w,tt=new n(w,$);return O.prototype.run=function(){this.handler.join().when(this.continuation)},q.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],U(e.progress,this.value,this.handler,e.receiver,e.resolver)},M.prototype.run=function(){function t(t){r.resolve(t)}function e(t){r.reject(t)}function n(t){r.notify(t)}var r=this.resolver;A(this._then,this.thenable,t,e,n)},D.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},D.prototype.rejected=function(t){this.to.reject(t)},D.prototype.progress=function(t){this.to.notify(t)},n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})}).call(this,e("_process"))},{_process:4}],21:[function(e,n,r){!function(t){"use strict";t(function(){function t(){return{state:"pending"}}function e(t){return{state:"rejected",reason:t}}function n(t){return{state:"fulfilled",value:t}}function r(r){var o=r.state();return 0===o?t():o>0?n(r.value):e(r.value)}return{pending:t,fulfilled:n,rejected:e,inspect:r}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],22:[function(e,n,r){!function(t){"use strict";t(function(t){function e(t,e,n,r){var o=k.resolve(t);return arguments.length<2?o:o.then(e,n,r)}function n(t){return new k(t)}function r(t){return function(){for(var e=0,n=arguments.length,r=new Array(n);n>e;++e)r[e]=arguments[e];return E(t,this,r)}}function o(t){for(var e=0,n=arguments.length-1,r=new Array(n);n>e;++e)r[e]=arguments[e+1];return E(t,this,r)}function i(){return new c}function c(){function t(t){r._handler.resolve(t)}function e(t){r._handler.reject(t)}function n(t){r._handler.notify(t)}var r=k._defer();this.promise=r,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}function s(t){return t&&"function"==typeof t.then}function u(){return k.all(arguments)}function f(t){return e(t,k.all)}function a(t){return e(t,k.settle)}function h(t,n){return e(t,function(t){return k.map(t,n)})}function l(t,n){return e(t,function(t){return k.filter(t,n)})}var p=t("./lib/decorators/timed"),d=t("./lib/decorators/array"),y=t("./lib/decorators/flow"),v=t("./lib/decorators/fold"),b=t("./lib/decorators/inspect"),_=t("./lib/decorators/iterate"),m=t("./lib/decorators/progress"),w=t("./lib/decorators/with"),g=t("./lib/decorators/unhandledRejection"),j=t("./lib/TimeoutError"),k=[d,y,v,_,m,b,w,p,g].reduce(function(t,e){return e(t)},t("./lib/Promise")),E=t("./lib/apply")(k);return e.promise=n,e.resolve=k.resolve,e.reject=k.reject,e.lift=r,e["try"]=o,e.attempt=o,e.iterate=k.iterate,e.unfold=k.unfold,e.join=u,e.all=f,e.settle=a,e.any=r(k.any),e.some=r(k.some),e.race=r(k.race),e.map=h,e.filter=l,e.reduce=r(k.reduce),e.reduceRight=r(k.reduceRight),e.isPromiseLike=s,e.Promise=k,e.defer=i,e.TimeoutError=j,e})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./lib/Promise":5,"./lib/TimeoutError":7,"./lib/apply":8,"./lib/decorators/array":9,"./lib/decorators/flow":10,"./lib/decorators/fold":11,"./lib/decorators/inspect":12,"./lib/decorators/iterate":13,"./lib/decorators/progress":14,"./lib/decorators/timed":15,"./lib/decorators/unhandledRejection":16,"./lib/decorators/with":17}]},{},[2])(2)});
//# sourceMappingURL=mopidy_musicbox_webclient/static/js/webclient.min.js.map